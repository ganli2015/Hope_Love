#pragma once
#include "InOut.h"
#include "NonCopyable.h"

#include <thread>

namespace CommonTool
{
	class IJob;

	//////////////////////////////////////////////////////////////////////////
	//Thread class.
	//////////////////////////////////////////////////////////////////////////
	class _COMMONTOOLSINOUT ThreadWorker : public NonCopyable
	{
		std::thread *_thread;
		shared_ptr<IJob> _job;
	public:
		ThreadWorker(shared_ptr<IJob> job);
		~ThreadWorker();

		//////////////////////////////////////////////////////////////////////////
		//Run the job async.
		//////////////////////////////////////////////////////////////////////////
		void Start();

		//////////////////////////////////////////////////////////////////////////
		//Wait for completion of the job.
		//////////////////////////////////////////////////////////////////////////
		void Wait();
	};
}


